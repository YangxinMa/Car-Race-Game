<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game:Home</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="css/game.css" rel="stylesheet">

</head>

<body>
    <div id="gameApp">

        <div class="py-5 text-center">
            <img class="d-block mx-auto mb-4" src="./img/logo2.png" alt="" width="200" height="100">
            <h4 class="shadow-sm text-white">WELCOME TO DEATH RACING, <strong>{{user}}</strong></h4>

            <div class="mt-5">
                <button class="btn btn-dark" type="button" onclick="{location.href='index.html'}">Log out</button>
                <button class="btn btn-info" id="newGame" type="button" v-on:click="newGame()">New Game</button>
            </div>
        </div>

        <div class="container">
            <div class="row g-5">

                <div class="col">

                    <div v-if="board != null">
                        <div class="col-md-7 col-lg-8">
                            <button class="btn btn-success" v-if="game != null" type="button" v-on:click="changeSpeed(1)">
                                Speed: 1x</button>
                            <button class="btn btn-warning" v-if="game != null" type="button" v-on:click="changeSpeed(2)">
                                Speed: 2x</button>
                            <button class="btn btn-danger" v-if="game != null" type="button" v-on:click="changeSpeed(4)">
                                Speed: 4x</button>

                            <h4 class="mt-3" v-if="game != null">
                                Score: {{game.currentScore}}</h4>
                        </div>


                            <table>
                                <tr v-for="(row, rowIdx) in board.hasWalls">
                                    <td v-for="(isBound, colIdx) in row">
                                        <div style="position: relative; left:0; top:0;">
                                            <img v-if="isBound" src="img/game/wall.png" />
                                            <img v-else src="img/game/road.png"/>

                                            <img v-if="locationMatches(board.pointLocation, rowIdx, colIdx)"
                                                 src="img/game/gold.png" class="stack"/>
                                            <div v-if="locationMatches(board.playerLocation, rowIdx, colIdx)">
                                                <img v-if="game.isGameLost" src="img/game/crash.png" class="stack"/>
                                                <img v-else src="img/game/player.png" class="stack"/>
                                            </div>
                                            <div v-for="aCar in board.carLocations">
                                                <img v-if="locationMatches(aCar, rowIdx, colIdx)"
                                                     src="img/game/roadblock.png" class="stack"/>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>

<!--                        <img class="card-img-overlay"-->
<!--                             v-if="game.isGameLost" src="img/game/gameover.png"/>-->
                        <h1 class="text-white" v-if="game.isGameLost">YOU LOST! Try again?</h1>

                    </div>
                </div>



                <div class="col-3 col-sm-3 col-md-3 col-lg-3 order-last">

                    <div class="d-grid gap-2 col-10 mx-auto mb-3">
                        <button class="btn btn-primary mt-3" v-if="game != null" type="button" v-on:click="endGame()">
                            Upload your record
                        </button>
                    </div>

                    <table class="table table-striped table-dark">

                        <thead>
                            <tr class="text-center">
                                <th class="h4 text-info" scope="col" v-for='(item, i) in rankTitle' :key="i">{{item}}</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr class="text-center" v-for='(eachUser, i) in rank' :key="i">
                                <td class="h5 text-secondary" style="overflow: hidden; text-overflow: ellipsis; max-width: 10ch" v-for='(item, j) in rankTitle' :key="j">{{eachUser[item]}}</td>
                            </tr>
                        </tbody>
                    </table>





                </div>

            </div>
        </div>
    </div>




    <script src="js/game.js"></script>

<!--    <main class="container-fluid main-region">-->
<!--        <div class="my-3 p-2 bg-body rounded shadow-sm">-->
<!--            <h5 class="mb-3">Welcome to the game</h5>-->

<!--            <table class="table-responsive">-->
<!--                <table class="table">-->
<!--                    <thead>-->
<!--                        <tr>-->
<!--                            <th scope="col">Position</th>-->
<!--                            <th scope="col">UserID</th>-->
<!--                            <th scope="col">Duration</th>-->
<!--                            <th scope="col">Records</th>-->
<!--                        </tr>-->
<!--                    </thead>-->

<!--                    <tbody>-->
<!--                    <tr class="accordion-toggle collapsed" id="accordion1" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne">-->
<!--                        <td class="expand-button"></td>-->
<!--                        <td>name</td>-->
<!--                        <td>2m:10s</td>-->
<!--                        <td>99 Points</td>-->

<!--                    </tr>-->
<!--                    <tr class="hide-table-padding">-->
<!--                        <td></td>-->
<!--                        <td colspan="3">-->
<!--                            <div id="collapseOne" class="collapse in p-3">-->
<!--                                <div class="row">-->
<!--                                    <div class="col-2">label</div>-->
<!--                                    <div class="col-6">value 1</div>-->
<!--                                </div>-->
<!--                                <div class="row">-->
<!--                                    <div class="col-2">label</div>-->
<!--                                    <div class="col-6">value 2</div>-->
<!--                                </div>-->
<!--                                <div class="row">-->
<!--                                    <div class="col-2">label</div>-->
<!--                                    <div class="col-6">value 3</div>-->
<!--                                </div>-->
<!--                                <div class="row">-->
<!--                                    <div class="col-2">label</div>-->
<!--                                    <div class="col-6">value 4</div>-->
<!--                                </div>-->
<!--                            </div></td>-->
<!--                    </tr>-->

<!--                    </tbody>-->
<!--                </table>-->
<!--            </table>-->

<!--&lt;!&ndash;            <div class="table-responsive">&ndash;&gt;-->
<!--&lt;!&ndash;                <table class="table">&ndash;&gt;-->
<!--&lt;!&ndash;                    <thead>&ndash;&gt;-->
<!--&lt;!&ndash;                        <tr>&ndash;&gt;-->
<!--&lt;!&ndash;                            <th scope="col" class="text-center">Position</th>&ndash;&gt;-->
<!--&lt;!&ndash;                            <th scope="col" class="text-center">Duration</th>&ndash;&gt;-->
<!--&lt;!&ndash;                            <th scope="col" class="text-center">UserID</th>&ndash;&gt;-->
<!--&lt;!&ndash;                            <th scope="col" class="text-center">Records</th>&ndash;&gt;-->
<!--&lt;!&ndash;                        </tr>&ndash;&gt;-->
<!--&lt;!&ndash;                    </thead>&ndash;&gt;-->

<!--&lt;!&ndash;                    <tbody>&ndash;&gt;-->
<!--&lt;!&ndash;                    <tr data-toggle="collapse" data-target="#accordion" class="clickable">&ndash;&gt;-->
<!--&lt;!&ndash;                        <td>Some Stuff</td>&ndash;&gt;-->
<!--&lt;!&ndash;                        <td>Some more stuff</td>&ndash;&gt;-->
<!--&lt;!&ndash;                        <td>And some more</td>&ndash;&gt;-->
<!--&lt;!&ndash;                    </tr>&ndash;&gt;-->
<!--&lt;!&ndash;                    <tr>&ndash;&gt;-->
<!--&lt;!&ndash;                        <td colspan="3">&ndash;&gt;-->
<!--&lt;!&ndash;                            <div id="accordion" class="collapse">Hidden by default</div>&ndash;&gt;-->
<!--&lt;!&ndash;                        </td>&ndash;&gt;-->
<!--&lt;!&ndash;                    </tr>&ndash;&gt;-->
<!--&lt;!&ndash;                    </tbody>&ndash;&gt;-->

<!--&lt;!&ndash;                    <tbody>&ndash;&gt;-->
<!--&lt;!&ndash;                        {leaderboard.map((item, index) => (&ndash;&gt;-->
<!--&lt;!&ndash;                        <tr key={item._id} class={`${index == 0 ? "table-warning": ""}`}>&ndash;&gt;-->
<!--&lt;!&ndash;                            <th scope="row" class="text-center">{index + 1}</th>&ndash;&gt;-->
<!--&lt;!&ndash;                            <td class="text-center">&ndash;&gt;-->
<!--&lt;!&ndash;                                {index === 0 ? <i class="text-warning bi-trophy-fill"/> : null}&ndash;&gt;-->
<!--&lt;!&ndash;                                {index === 1 ? <i class="text-secondary bi-trophy-fill"/> : null}&ndash;&gt;-->
<!--&lt;!&ndash;                                {index === 2 ? <i class="text-danger bi-trophy-fill"/> : null}&ndash;&gt;-->
<!--&lt;!&ndash;                            </td>&ndash;&gt;-->
<!--&lt;!&ndash;                            <td class="text-center">{item.name}</td>&ndash;&gt;-->
<!--&lt;!&ndash;                            <td class="d-none d-sm-table-cell text-center">{item.nCaseStudies}</td>&ndash;&gt;-->
<!--&lt;!&ndash;                            <td class="fw-bold text-center">{item.points}</td>&ndash;&gt;-->
<!--&lt;!&ndash;                        </tr>&ndash;&gt;-->
<!--&lt;!&ndash;                        ))}&ndash;&gt;-->
<!--&lt;!&ndash;                    </tbody>&ndash;&gt;-->
<!--&lt;!&ndash;                </table>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="container mt-5">&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="bg-image" style="background-image: url('img/gameEntrance.jpg');height: 100vh;"></div>&ndash;&gt;-->
<!--&lt;!&ndash;                &lt;!&ndash;            <img class="mb-4" src="img/gameEntrance.jpg" class="img-responsive">&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;                <div>&ndash;&gt;-->
<!--&lt;!&ndash;                    <button class="w-100 btn btn-lg btn-primary mt-3">Start Game</button>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->

<!--        </div>-->

<!--    </main>-->

<!--    <div class="start">-->
<!--        <div class="d-flex justify-content-center p-2">-->
<!--            <button class="btn ">Start Game</button>-->
<!--        </div>-->
<!--    </div>-->


</body>
</html>